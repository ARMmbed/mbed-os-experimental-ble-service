@startuml
skinparam ParticipantPadding 40
skinparam BoxPadding 10

box "FOTA Target" #White
participant Application as app
participant EventHandler as eh
participant FOTAService as fotasvc
end box
participant FOTAClient as fotaclient

fotaclient -> fotasvc : Write BSC (fragment ID = N+1)
fotasvc -> fotasvc: check fragment ID = N+1
fotasvc -> eh: on_bsc_written(data)
fotaclient -> fotaclient : Firmware transfer complete
fotaclient -> fotasvc: Write Control: FOTA Commit
fotasvc -> eh: on_fota_commit()
eh -> app: Validate FW update candidate
app -> fotasvc: Write FOTA Status:\nUPDATE_SUCCESS
fotaclient -> fotasvc: Read FOTA Status\nSUCCESS
@enduml